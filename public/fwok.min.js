function fwok(e,t){const n=t||document.querySelector(e);return n.stateful=((e,t)=>{function r(){const r=e.map(e=>e.get()),a=t(r);Array.isArray(a)?n.innerHTML=a.join(""):n.innerHTML=a.toString()}e.forEach(e=>e._onchange.push(r))}),n.on=((e,t,r=!1)=>{r?n.addEventListener(e,e=>{e.preventDefault(),t(e)}):n.addEventListener(e,t)}),n}fwok.state=(e=>({_value:e,_onchange:[],get(){return this._value},set(e){this._value=e,this.changed()},update(e){this.set(e(this.get())||this.get())},changed(){this._onchange.forEach(e=>e(this))}})),function(){const els=document.querySelectorAll("*");for(const el of els){el.hasAttribute("fwok:ref")&&(window[el.getAttribute("fwok:ref")]=fwok(0,el)),el.hasAttribute("fwok:bind")&&Object.defineProperty(window,el.getAttribute("fwok:bind"),{get:function(){return el.value},set:function(e){el.value=e}});for(let i=0;i<el.attributes.length;i++){const attr=el.attributes.item(i);if(attr.name.startsWith("fwok:on")){const evt=attr.name.substr(7).replace("|preventdefault","");-1!=attr.name.indexOf("|preventdefault")?el.addEventListener(evt,event=>{event.preventDefault(),eval(attr.value)}):el.addEventListener(evt,event=>{eval(attr.value)})}}}}();